
<!DOCTYPE html>
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>O</title>
  <style>

@font-face {
font-family: interstate;
src: url('fonts/interstate-bold.ttf');
}

body {
	background-color:black;
	padding:0px;
	margin:0px;
	text-align: center;
}

#button {
	cursor: pointer;
	font-family: interstate;
	color: #80e1ff;
	opacity: 1;
	text-align: center;
	width:100%;
	height:100%;
}

</style>
<script src="http://code.jquery.com/jquery-latest.js"></script>
<script src="jquery.animate-colors-min.js"></script>
<script src="jquery.textfill.js"></script>
<script src="jquery.mb.audio.js"></script>

<script type="text/javascript">

/*
 * DEFINE SOUNDS
 */
$.mbAudio.sounds = {

    effectSprite: {
        id: "adem",
        mp3: "adem.mp3",
        //example of sprite
        sprite:{
            ademen: {id: "ademen", start: 0, end: 20, loop: 2}
        }
    }
};


function audioIsReady(){

}

$(document).on("initAudio", function () {

    //otherwise sound is initialized on the first tap loosing time and UX
     $.mbAudio.pause('effectSprite', audioIsReady);
});

</script>

<script type="text/javascript">

var w = window.innerWidth
|| document.documentElement.clientWidth
|| document.body.clientWidth;

var h = window.innerHeight
|| document.documentElement.clientHeight
|| document.body.clientHeight;
			
jQuery.fx.interval = 25;

var woorden = new Array("o", "O", "Oo", "OOO", "Oh", ".", "hh", "...", "Hhh", "Ooo", "ooooh", "Oooh");

var alGeklikt = 0;
var beeldAdemen = null;
var beeldAdemenNieuw = null;
var woordenGaan = null;

$(document).ready(function(){
	$("#button").css("width", w);
	$("#button").css("height", h);
	$('#button').textfill({
	    minFontPixels: 50,
	    maxFontPixels: 5000
	});
	//textFit(document.getElementById('button'), {alignVert: true});

	$("#button").click(function(){  
		alGeklikt++;
		if (alGeklikt==1) {
		 	$("#button").animate({
			 	opacity: "0"
		 	}, 3000);
		 	beeldAdemen = window.setInterval(function(){ ademGaan() }, 3500);
		} else if (alGeklikt==2) {
			clearInterval(beeldAdemen);
			beeldAdemenNieuw = window.setInterval(function(){ ademGaan() }, 3500);
			setTimeout(function(){
		 		$("#button").animate({
			 		opacity: "1"
			 	}, 3000);
			 	//adem.play();
			 	$.mbAudio.play('effectSprite', 'ademen');
			}, 3000)
			woordenGaan = window.setInterval(function(){ go_woorden() }, 7000);
		} else if (alGeklikt==3) {
			clearInterval(beeldAdemenNieuw);
			clearInterval(woordenGaan);
			setTimeout(function(){
		 		$("body").animate({
			 		backgroundColor: "rgb(0, 0, 0)"
			 	}, 1000);
		 		$("#button").animate({
			 		opacity: "0"
			 	}, 1000);
			 	adem.pause();
			 	adem.currentTime = 0;
			}, 3000)
		}
	});
});

function ademGaan() {
	var color = $("body").css( "background-color" );
	if (color=="rgb(128, 225, 255)") {
	 	$("body").animate({ 
	 		backgroundColor: "rgb(0, 0, 0)"
	 	}, 3000);
	} else {
	   	$("body").animate({ 
	   		backgroundColor: "rgb(128, 225, 255)"
	   	}, 3000);
	}
}

function go_woorden(){
	var willekeurig = Math.floor(woorden.length*Math.random());
	$("#woord").html(woorden[willekeurig]);
	var hoogteverschil = 30*(woorden[willekeurig].length)-40; 
	$("#button").css("margin-top", hoogteverschil);
	$('#button').textfill({
    	minFontPixels: 50,
		maxFontPixels: 5000
    });
}

</script>
</head>
<body>
<div id="button" onclick="$(document).trigger('initAudio')"><span id="woord">.</span></div>
<audio id="adem" style="display:none;" loop="loop">
    <source src="adem.mp3" type="audio/mpeg" />
</audio>
</body>
</html>
